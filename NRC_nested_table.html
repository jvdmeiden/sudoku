<!DOCTYPE html>
<html lang="en">
<head>
  <title>Sudoku NRC</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <style>
    table {
      border-collapse: collapse;
	}
    td.large {
      width: 153px;
    }
    tr.lage {
      height: 153px;
    }
    td.medium {
	  text-align: center;
	  font-size: 36px;
      cursor: crosshair;	  
      width: 51px;
    }
    tr.medium {
      height: 51px;
    }	
    td.small {
	  text-align: center;
	  font-size: 12px;
      width: 17px;
    }
    tr.small {
      height: 17px;
    }	
    td.nrc {
	  bgcolor: '#f0f0f0'
	}	
   </style>
</head>
  <body>

  <div class="container">
    <div id="sudokuTable">
    </div>
  </div>

  </body>
  <script>
    // Set up table
 	var tableL = document.createElement('table');
	tableL.setAttribute('border', '3');
	for (var x = 0; x < 3 ; x++){
	  var lineL = document.createElement('tr');
	  lineL.setAttribute('class','large');
	  for (var y = 0; y < 3 ; y++){
        var cellL = document.createElement('td');
		cellL.setAttribute('class','large');
		var tableM = document.createElement('table');
		tableM.setAttribute('border', '2');
	    for (var i = 0; i < 3 ; i++){
		  var lineM = document.createElement('tr');
		  lineM.setAttribute('class','medium');
		  for (var j = 0; j < 3 ; j++){
		    var cellM = document.createElement('td');
			if (     (((((x*3)+i) > 0 && ((x*3)+i) < 4 )  
			      || ((((x*3)+i) > 4 && ((x*3)+i) < 8 ))))
				  && (((((y*3)+j) > 0 && ((y*3)+j) < 4 )  
			      || ((((y*3)+j) > 4 && ((y*3)+j) < 8 ))))
				  ){
			  cellM.setAttribute('bgcolor','#d0d0d0');
			}
			cellM.setAttribute('class','medium');
			cellM.setAttribute('id','M='+x+','+y+'_'+i+','+j)
			var tableS = document.createElement('table');
			tableS.setAttribute('id','T='+x+','+y+'_'+i+','+j)
			tableS.setAttribute('border', '0');
			for (var p = 0; p < 3; p++){
			  var lineS = document.createElement('tr');
			  lineS.setAttribute('class','small');
			  for (var q = 0; q < 3; q++){
			    var cellS = document.createElement('td');
				cellS.setAttribute('onclick','clicked(this)');
			    cellS.setAttribute('id',x+','+y+','+i+','+j+','+(3*p+q+1));
			    cellS.setAttribute('class','small');
				var cellText = document.createTextNode(p*3+q+1);
				cellS.appendChild(cellText);
				lineS.appendChild(cellS);
			  }
			  tableS.appendChild(lineS);
			}
	        cellM.appendChild(tableS);
            lineM.appendChild(cellM);			
		  }	
		  tableM.appendChild(lineM);
		}
		cellL.appendChild(tableM);
		lineL.appendChild(cellL);
	  }
	  tableL.appendChild(lineL);
	}
	
    var root=document.getElementById('sudokuTable');
	root.appendChild(tableL);

	// setup matrix
    var mPossible = new Array();
	var mValue = new Array();
    for (i = 0; i < 9 ; i++){
 	  var rowP = new Array();
	  var rowV = new Array();
      for ( j = 0; j < 9 ; j++){
		rowP.push([1,2,3,4,5,6,7,8,9]);
		rowV.push(null);
      };
	  mPossible.push(rowP);
	  mValue.push(rowV);
    };

	function clicked(x){
	  var cVal=JSON.parse('['+x.id+']');
	  console.log(JSON.stringify(cVal));
	  console.log(JSON.stringify(mValue[3*cVal[0]+cVal[2]][3*cVal[1]+cVal[2]]));
	  if(mValue[3*cVal[0]+cVal[2]][3*cVal[1]+cVal[3]]==null){
	    console.log("empty");
		mValue[3*cVal[0]+cVal[2]][3*cVal[1]+cVal[3]]=cVal[4];
		var toRemove=document.getElementById('T='+cVal[0]+','+cVal[1]+'_'+cVal[2]+','+cVal[3]);
	    var target=document.getElementById('M='+cVal[0]+','+cVal[1]+'_'+cVal[2]+','+cVal[3]);
		target.removeChild(toRemove);
        var cellText = document.createTextNode(cVal[4]);
		target.appendChild(cellText);
        
		
		
		
	  }
	  
	  
	}
	
	



	</script>
</html>

